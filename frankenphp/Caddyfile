{
    # Active FrankenPHP
    frankenphp
    auto_https off
    admin off
    debug
    http_port 80
    https_port 443
}

:80 {
    # Root directory
    root * /app/public

    # PHP handling
    php_server {
        index index.php
    }
    
    # Compression
    encode gzip
    
    # Static files
    file_server {
        hide .* *.php
    }
    
    # Headers
    header {
        # Security headers
        X-Frame-Options "SAMEORIGIN"
        X-Content-Type-Options "nosniff"
        X-XSS-Protection "1; mode=block"
        
        # CORS
        Access-Control-Allow-Origin "*"
        Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
        Access-Control-Allow-Headers "*"
    }
    
    # Logging
    log {
        output stdout
        format json
        level DEBUG
    }

    # Error handling
    handle_errors {
        respond "Error: {err.status_code} {err.message}" 500
    }
}